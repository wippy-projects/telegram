version: "1.0"
namespace: telegram.handler

entries:
  # ── Webhook Handler ─────────────────────────────────────
  - name: webhook
    kind: function.lua
    source: file://webhook.lua
    method: handler
    modules:
      - http
      - json
      - registry
      - funcs
      - env
      - logger
    imports:
      types: telegram.sdk:types

  - name: webhook.endpoint
    kind: http.endpoint
    meta:
      router: ~
    method: POST
    path: /webhook
    func: webhook

  # ── CLI: Register Webhook ──────────────────────────────
  - name: register_webhook
    kind: process.lua
    source: file://register_webhook.lua
    method: main
    modules:
      - io
      - funcs
      - env
    meta:
      command:
        name: register-webhook
        short: Register Telegram webhook URL

  # ── CLI: Delete Webhook ────────────────────────────────
  - name: delete_webhook
    kind: process.lua
    source: file://delete_webhook.lua
    method: main
    modules:
      - io
      - funcs
    meta:
      command:
        name: delete-webhook
        short: Remove Telegram webhook URL
